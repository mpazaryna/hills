require 'rubygems'
require 'bundler'
Bundler.require
require_relative "../src/group"

MongoMapper.connection = Mongo::Connection.new('127.0.0.1', 27017)
MongoMapper.database = "sgmc_dev"

describe "Group" do
  context 'query' do
    it 'should count for a company_guid' do
      company_guid = "BD0B6025-C943-4614-A537-E7E34A92FA13"
      c = Group.where(company_guid: company_guid).all.count
      c.should == 38
    end
  end
  context 'dropdown' do
    it 'should return group object by company_guid' do
      company_guid = "BD0B6025-C943-4614-A537-E7E34A92FA13"
      dat = Group.where(company_guid: company_guid).all
      dat.count.should == 38
    end
  end
end

# <Group _id: BSON::ObjectId('5005b4b30e6a51d6f1001684'), active: true, 
# asset_list: [
# 6EA51C7A-553E-11DE-A43C-378B1189027C", "6E5CF07B-ACDC-9102-E040-A2A8567D7FC6", "6E5CF07B-ACE6-9102-E040-A2A8567D7FC6", 
# 6E5CF07B-ACB6-9102-E040-A2A8567D7FC6", "6EA5276A-553E-11DE-A43C-378B1189027C", "6EA29E82-553E-11DE-A43C-378B1189027C", 
# 6EA34F94-553E-11DE-A43C-378B1189027C", "6EA335E0-553E-11DE-A43C-378B1189027C", "6E5CF07B-ACDD-9102-E040-A2A8567D7FC6", 
# 6E5CF07B-ACE0-9102-E040-A2A8567D7FC6", "6EA0C972-553E-11DE-A43C-378B1189027C", "6EA44944-553E-11DE-A43C-378B1189027C", 
# 6EA32AA0-553E-11DE-A43C-378B1189027C", "6EA20314-553E-11DE-A43C-378B1189027C", "6E5CF07B-ACDB-9102-E040-A2A8567D7FC6", 
# 6EA34120-553E-11DE-A43C-378B1189027C", "6EA0D4D0-553E-11DE-A43C-378B1189027C", "6E5CF07B-ACDE-9102-E040-A2A8567D7FC6", 
# 6EA28884-553E-11DE-A43C-378B1189027C", "6E5CF07B-ACE4-9102-E040-A2A8567D7FC6", "7A3E68C9-6C6A-C9E6-E040-A2A8567D7A20", 
# 6EA46BC2-553E-11DE-A43C-378B1189027C", "6EA45506-553E-11DE-A43C-378B1189027C", "6EA31F60-553E-11DE-A43C-378B1189027C", 
# 6EA497F0-553E-11DE-A43C-378B1189027C", "6E5CF07B-ACE5-9102-E040-A2A8567D7FC6", "6EA51194-553E-11DE-A43C-378B1189027C", 
# 6EA15DC4-553E-11DE-A43C-378B1189027C", "7152131E-99C6-C86C-E040-A2A8567D4EA1"], 
# company_guid: "BD0B6025-C943-4614-A537-E7E34A92FA13", created_at: Tue, 17 Jul 2012 18:53:39 UTC +00:00, 
# name: "MC-CriticalServers", updated_at: Tue, 17 Jul 2012 18:53:39 UTC +00:00> 